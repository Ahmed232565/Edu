import { createRouter, createWebHistory } from 'vue-router'; import Home from '../views/Home.vue'; import Schools from '../views/Schools.vue'; import Buses from '../views/Buses.vue'; import Store from '../views/Store.vue'; import Jobs from '../views/Jobs.vue'; import Education from '../views/Education.vue'; import Contact from '../views/Contact.vue'; import Profile from '../views/Profile.vue'; import Dashboard from '../views/Dashboard.vue'; import { auth } from '../composables/auth.js'; const routes=[{path:'/',component:Home},{path:'/schools',component:Schools},{path:'/buses',component:Buses},{path:'/store',component:Store},{path:'/jobs',component:Jobs,meta:{role:['student']}},{path:'/learn',component:Education},{path:'/contact',component:Contact},{path:'/profile',component:Profile},{path:'/dashboard',component:Dashboard,meta:{role:['supervisor']}}]; const router=createRouter({history:createWebHistory(),routes}); router.beforeEach((to,from,next)=>{ const user=auth.currentUser(); if (to.meta?.role && !to.meta.role.includes(user?.role)) return next('/'); next(); }); export default router;